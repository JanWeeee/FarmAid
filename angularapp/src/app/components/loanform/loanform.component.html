<div class="loan-form-container">
  <h2>Loan Application Form</h2>
  <button class="back-button" (click)="goBack()">Back</button>
  <form [formGroup]="myForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="farmLocation">Farm Location:</label>
      <input type="text" id="farmLocation" formControlName="farmLocation" required>
      <div *ngIf="myForm.get('farmLocation')?.invalid && (myForm.get('farmLocation')?.touched || myForm.get('farmLocation')?.dirty)" class="error">
        Farm Location is required.
      </div>
    </div>
    <div class="form-group">
      <label for="farmerAddress">Farmer Address:</label>
      <input type="text" id="farmerAddress" formControlName="farmerAddress" required>
      <div *ngIf="myForm.get('farmerAddress')?.invalid && (myForm.get('farmerAddress')?.touched || myForm.get('farmerAddress')?.dirty)" class="error">
        Farmer Address is required.
      </div>
    </div>
    <div class="form-group">
      <label for="farmSizeInAcres">Farm Size (in acres):</label>
      <input type="number" id="farmSizeInAcres" formControlName="farmSizeInAcres" required>
      <div *ngIf="myForm.get('farmSizeInAcres')?.invalid && (myForm.get('farmSizeInAcres')?.touched || myForm.get('farmSizeInAcres')?.dirty)" class="error">
        Farm Size is required and must be greater than 0.
      </div>
    </div>
    <div class="form-group">
      <label for="farmPurpose">Farm Purpose:</label>
      <input type="text" id="farmPurpose" formControlName="farmPurpose" required>
      <div *ngIf="myForm.get('farmPurpose')?.invalid && (myForm.get('farmPurpose')?.touched || myForm.get('farmPurpose')?.dirty)" class="error">
        Farm Purpose is required.
      </div>
    </div>
    <div class="form-group">
      <label for="file">Upload File:</label>
      <input type="file" id="file" (change)="onFileChange($event)" required>
      <div *ngIf="!fileUploaded && formSubmitted" class="error">
        File is required.
      </div>
    </div>
    <div *ngIf="formSubmitted && myForm.invalid" class="error-message">
      <div *ngIf="myForm.invalid">All fields are required.</div>
    </div>
    <div class="form-group">
      <button type="submit" class="btn btn-primary" [disabled]="myForm.invalid">Submit</button>
    </div>
  </form>
  <!-- Success Message Dialog -->
  <div *ngIf="showPopup" class="success-dialog">
    <p>Successfully Added!</p>
    <button (click)="closePopup()" class="btn btn-success">OK</button>
  </div>
</div>